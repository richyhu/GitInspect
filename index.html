<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="GitHub 仓库浏览器 - 一个查看GitHub仓库详细信息的工具" />
    <title>GitHub 仓库浏览器</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      crossorigin="anonymous"
    />
    <style>
      /* 基础样式 */
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
        color: #333;
      }
      
      /* 深色模式支持 */
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #121212;
          color: #e0e0e0;
        }
        
        .error-container {
          background-color: #1e1e1e !important;
          border-color: #444 !important;
        }
        
        .error-button {
          background-color: #4285f4 !important;
        }
        
        .error-button:hover {
          background-color: #5391f6 !important;
        }
      }
      
      /* 加载错误样式 */
      .error-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        text-align: center;
        background-color: #f5f5f5;
      }
      
      .error-icon {
        font-size: 4rem;
        margin-bottom: 20px;
        color: #ff5252;
        animation: pulse 2s infinite;
      }
      
      .error-title {
        font-size: 2rem;
        margin-bottom: 10px;
        font-weight: bold;
      }
      
      .error-message {
        font-size: 1rem;
        margin-bottom: 30px;
        max-width: 600px;
        color: #666;
      }
      
      .error-button {
        padding: 12px 24px;
        background-color: #3b82f6;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: background-color 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .error-button:hover {
        background-color: #2563eb;
      }
      
      .error-details {
        margin-top: 20px;
        font-size: 0.875rem;
        color: #999;
      }
      
      @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- 加载错误时的提示 -->
    <script>
      // 存储错误信息
      let globalError = null;
      
      // 监听全局错误
      window.addEventListener('error', function(e) {
        console.error('加载错误:', e);
        globalError = e;
        showErrorPage();
      });
      
      // 监听未捕获的Promise拒绝
      window.addEventListener('unhandledrejection', function(e) {
        console.error('未处理的Promise拒绝:', e);
        globalError = e;
        showErrorPage();
      });
      
      // 检查是否在3秒内成功渲染
      setTimeout(() => {
        const root = document.getElementById('root');
        if (root && root.children.length === 0) {
          showErrorPage();
        }
      }, 3000);
      
      // 显示错误页面
      function showErrorPage() {
        const root = document.getElementById('root');
        if (root && root.children.length === 0) {
          root.innerHTML = `
            <div class="error-container">
              <div class="error-icon">
                <i class="fas fa-exclamation-circle"></i>
              </div>
              <h1 class="error-title">加载失败</h1>
              <p class="error-message">
                页面内容未能正确加载，可能是网络问题或服务器暂时不可用。
              </p>
              <button onclick="location.reload()" class="error-button">
                <i class="fas fa-sync-alt"></i>
                刷新页面重试
              </button>
              <div class="error-details">
                <p>如果问题持续存在，请稍后再试或检查您的网络连接。</p>
              </div>
            </div>
          `;
        }
      }
    </script>
  </body>
</html>
